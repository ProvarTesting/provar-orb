description: >
  Checkout code from Git which contains a test project, execute test cases using Provar CLI, and
  publish report
parameters:
  majorversion:
    type: string
    default: 2.10.1
    description: Major version of provar
  minorversion:
    type: string
    default: '05'
    description: Minor version of provar
  url:
    type: string
    default: download.provartesting.com
    description: >
      URL, minus https://, from which to download the specified version of
      the Provar CLI
  project_name:
    type: string
    default: ProvarProject
  build_file:
    type: string
    default: build.xml
  test_plan:
    type: string
    default: "Regression"
  environment:
    type: string
    default: ""
  executor:
    type: executor
    default: default
    description: |
      Executor to use for this job, defaults to this orb's default executor
executor: <<parameters.executor>>
steps:
  - checkout
  - setup_provar:
      majorversion: << parameters.majorversion >>
      minorversion: << parameters.minorversion >>
      url: << parameters.url >>
    # install chrome and chromedriver
  - browser-tools/install-chrome
  - browser-tools/install-chromedriver
  # install ant
  - run:
      command: sudo apt-get update -y && sudo apt-get install -y ant
  - run_test_plans:
      project_name: << parameters.project_name >>
      build_file: << parameters.build_file >>
      test_plan: << parameters.test_plan >>
      environment: << parameters.environment >>
      email_target: << parameters.email_target >>
